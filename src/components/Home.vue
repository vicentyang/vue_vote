<template>
    <div class='container'>
        <h3 class='text-center'>Click on the portrait. Select your favorite.</h3>
        <div class='row'>
            <div v-for="(character, index) in characterList" :class="index === 0 ? 'col-xs-6 col-sm-6 col-md-5 col-md-offset-1' : 'col-xs-6 col-sm-6 col-md-5'">
                <div class='thumbnail fadeInUp animated'>
                       <!-- <img @click = "vote(character)" :src="'http://image.eveonline.com/Character/' + character.characterId + '_512.jpg'" /> -->

                     <img class='fixHW thumb-md' @click = "vote(character)" :src="'./static/hero/' + heroList.data[character.randomHeroId].ename + '.jpg'" />

                    <div class='caption text-center'>
                        <ul class='list-inline'>
                            <li>
                                <strong>Race:</strong> {{heroList.data[character.randomHeroId].cname}}</li>
                            <li>
                                <strong>Bloodline:</strong> {{heroList.data[character.randomHeroId].title}}</li>
                        </ul>
                        <h4>
                            <!-- <router-link to="/emoji">
                                <strong>{{character.name}}</strong>

                            </router-link> -->
                            <!-- <router-link :to="'/character/' + character.characterId">
                                <strong>{{character.name}}</strong>

                            </router-link> -->
                            <router-link :to="{name: 'character', params:{id: character.characterId}, query: {randomHeroId:character.randomHeroId}}">
                                <strong>{{character.randomHeroId}}</strong>

                            </router-link>
                        </h4>
                    </div>
                </div>
                <!-- <span>aaa</span> -->
            </div>
        </div>
    </div>
</template>
<script type="text/javascript">
import {first, without, findWhere} from 'underscore';
import { mapGetters, mapActions } from 'vuex';
import heroList from '../../static/data/heroList.json'

export default {
    // name:'Home',
    props: [

    ],

    data: function () {
        return {
            heroList
            // characterList: this.$store.getters.characterList
        }
    },

    computed: {
        ...mapGetters([
            'characterList',
        ])
    },

    methods: {
        ...mapActions([
            'getTwoCharacters',
            'sendVote'
        ]),
        showHome() {
            console.log('Home.vue>>>24', 'showHome');
        },
        showDetail() {
            console.log('showDetail');
        },
        vote(character) {

            console.log('vote', character);
            var winner = character.characterId;
            var loser = first(without(this.characterList, findWhere(this.characterList, { characterId: winner }))).characterId;
            // HomeActions.vote(winner, loser);
            this.sendVote({winner, loser})

        }
    },
    mounted: function () {

        this.getTwoCharacters()
    }
}
</script>

<style scoped>
.fixHW {
    width: 150px;
    height: 150px;
}
</style>

